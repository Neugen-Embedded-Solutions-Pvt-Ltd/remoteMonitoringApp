<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>Hello world</h2>
    <form action="" id="forms">
        <input type="text" name="" id="values">
        <button type="submit">submit</button>
    </form>
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"
        integrity="sha384-mkQ3/7FUtcGyoppY6bz/PORYoGqOl7/aSUMn2ymDOJcapfS6PHqxhRTMh1RR0Q6+"
        crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        function randomTemprature(max, min) {
            return Math.floor(Math.random() * (max - min)) + min;
        };
        let socket = io('http://localhost:3001/');
        socket.on('connect', (connect) => {
            console.log('user connected', socket.id);
            socket.on('device temperature', (tempratureData) => {
                console.log('message from server:', tempratureData);
            });
            // emit temprature signal to server 5 secs once
            setInterval(() => {
                let valuePass = randomTemprature(0, 50);
                let UserTempData = {
                    device_id: 2,
                    temperature: valuePass
                };
                console.log(UserTempData);
                socket.emit('device temperature', UserTempData);
            }, 1000000);

        });

    </script>
</body>

</html>